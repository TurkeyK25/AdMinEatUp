<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manage Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex bg-gray-100 min-h-screen overflow-hidden">
  <!-- Sidebar -->
  <div id="sidebar" class="h-screen overflow-hidden"></div>

  <!-- Main content -->
  <div class="flex-1 p-8 overflow-y-auto">
    <div class="flex justify-between items-center mb-6">
      <div class="flex items-center gap-2">
        <button 
          class="bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300 transition"
          onclick="window.location.href='User.html'"
        >
          ‚Üê Back
        </button>
        <input type="text" placeholder="Search store..." class="px-4 py-2 border rounded w-96" />
      </div>
      <div class="text-xl">üë§</div>
    </div>

    <div class="flex justify-between items-center mb-6">
      <h3 class="text-xl font-bold">Store List</h3>
      <button class="bg-blue-600 text-white px-4 py-2 rounded" onclick="openAddForm()">Add Store</button>
    </div>

    <!-- Store list -->
    <div class="bg-white rounded shadow store-list">
      <div class="flex items-center gap-4 p-4 border-b">
        <img src="https://via.placeholder.com/80" class="w-20 h-20 rounded object-cover" />
        <div class="flex-1">
          <h4 id="storeName" class="font-semibold text-lg">Signature Branch</h4>
          <p id="storeStock" class="text-gray-500">124 Packet in stock</p>
        </div>
        <button onclick="openEditForm()" class="bg-blue-500 text-white px-4 py-1 rounded">Edit</button>
      </div>
    </div>

    <!-- Edit Form -->
    <div id="editForm" class="hidden fixed top-24 right-16 bg-white p-6 rounded shadow w-80">
      <h3 class="text-lg font-semibold mb-4">Edit Store</h3>
      <label class="text-sm">Branch Name</label>
      <input id="branchNameInput" type="text" class="w-full border p-2 rounded mb-4" value="Signature Branch" />
      <label class="text-sm">Packets in Stock</label>
      <input id="stockInput" type="number" class="w-full border p-2 rounded mb-4" value="124" />
      <div class="flex justify-end gap-2">
        <button class="px-4 py-1 border rounded" onclick="closeEditForm()">Cancel</button>
        <button class="px-4 py-1 bg-blue-600 text-white rounded" onclick="saveChanges()">Save</button>
      </div>
    </div>

    <!-- Add Form -->
    <div id="addForm" class="hidden fixed top-24 right-16 bg-white p-6 rounded shadow w-80">
      <h3 class="text-lg font-semibold mb-4">Add Store</h3>
      <label class="text-sm">Branch Name</label>
      <input id="newBranch" type="text" class="w-full border p-2 rounded mb-4" />
      <label class="text-sm">Packets in Stock</label>
      <input id="newStock" type="number" class="w-full border p-2 rounded mb-4" />
      <div class="flex justify-end gap-2">
        <button class="px-4 py-1 border rounded" onclick="closeAddForm()">Cancel</button>
        <button class="px-4 py-1 bg-blue-600 text-white rounded" onclick="addStore()">Add</button>
      </div>
    </div>
  </div>

  <!-- Load sidebar -->
  <script>
    fetch('../menu/Sidebar.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('sidebar').innerHTML = html;

        const currentPage = window.location.pathname.split("/").pop();
        const links = document.querySelectorAll(".nav-link");

        links.forEach(link => {
          if (link.getAttribute("data-page") === currentPage) {
            link.classList.add("text-blue-600", "font-semibold");
          } else {
            link.classList.remove("text-blue-600", "font-semibold");
          }
        });
      });
  </script>

  <!-- Logic -->
  <script>
    const editForm = document.getElementById("editForm");
    const addForm = document.getElementById("addForm");
    const storeName = document.getElementById("storeName");
    const storeStock = document.getElementById("storeStock");
    const branchNameInput = document.getElementById("branchNameInput");
    const stockInput = document.getElementById("stockInput");

    function openEditForm() {
      editForm.classList.remove("hidden");
      addForm.classList.add("hidden");
    }

    function closeEditForm() {
      editForm.classList.add("hidden");
    }

    function saveChanges() {
      storeName.textContent = branchNameInput.value;
      storeStock.textContent = `${stockInput.value} Packet in stock`;
      closeEditForm();
    }

    function openAddForm() {
      addForm.classList.remove("hidden");
      editForm.classList.add("hidden");
    }

    function closeAddForm() {
      addForm.classList.add("hidden");
    }

    function addStore() {
      const name = document.getElementById("newBranch").value;
      const stock = document.getElementById("newStock").value;
      if (!name || !stock) return alert("Please fill in all fields");

      const storeList = document.querySelector(".store-list");
      const newCard = document.createElement("div");
      newCard.className = "flex items-center gap-4 p-4 border-t";
      newCard.innerHTML = `
        <img src="https://via.placeholder.com/80" class="w-20 h-20 rounded object-cover" />
        <div class="flex-1">
          <h4 class="font-semibold text-lg">${name}</h4>
          <p class="text-gray-500">${stock} Packet in stock</p>
        </div>
        <button onclick="openEditForm()" class="bg-blue-500 text-white px-4 py-1 rounded">Edit</button>
      `;
      storeList.appendChild(newCard);
      closeAddForm();
    }
  </script>
</body>
</html>
